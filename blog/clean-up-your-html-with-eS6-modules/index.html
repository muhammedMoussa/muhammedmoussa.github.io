<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.8f02dd4b96e82e0ecc15.css">@import url(https://unpkg.com/tailwindcss@1.4.6/dist/tailwind.min.css);@import url(https://use.fontawesome.com/releases/v5.7.2/css/all.css);.header-module--header--3A712{position:relative;margin:10px 0}.header-module--title--33kOg{color:#000;font-size:3rem;text-decoration:none}.header-module--nav-list--87D9u{display:flex;list-style-type:none;margin:0}.header-module--nav-item--1ixk0{color:#999;font-size:.9rem;margin-right:1.3rem;text-decoration:none}.header-module--nav-item--1ixk0:hover{color:#666}.header-module--active-nav-item--26N0B{color:#3182ce}body{--bg:#fff;--textNormal:#222;--textTitle:#222;--textLink:#00f;--hr:rgba(0,0,0,0.2);background-color:var(--bg)}body.dark{-webkit-font-smoothing:antialiased;--bg:#1a202c;--textNormal:hsla(0,0%,100%,0.88);--textTitle:#fff;--textLink:#ff0;--hr:hsla(0,0%,100%,0.2)}.toggle-input{position:absolute;right:0}.toggle-input input{width:.1px!important;height:.1px!important}.postTitle{font-size:2em;margin:10px 0}.postDate{margin-bottom:10px}</style><meta name="generator" content="Gatsby 2.26.1"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link as="script" rel="preload" href="/webpack-runtime-2d35c8ae8a6e820fd296.js"/><link as="script" rel="preload" href="/framework-66de6f443629588fba4e.js"/><link as="script" rel="preload" href="/app-8a684073d732c11c195e.js"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/commons-e5a147ed1fa31cc8d9ab.js"/><link as="script" rel="preload" href="/component---src-templates-post-page-template-js-d7dc19145f6281335802.js"/><link as="fetch" rel="preload" href="/page-data/blog/clean-up-your-html-with-eS6-modules/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3159585216.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/717330468.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="min-h-screen max-w-4xl p-5 mx-auto flex flex-col" style="background-color:var(--bg);color:var(--textNormal)"><div class="flex-grow"><header class="header-module--header--3A712"><nav><ul class="header-module--nav-list--87D9u"><li><a class="header-module--nav-item--1ixk0" href="/">Home</a></li><li><a class="header-module--nav-item--1ixk0" href="/blog">Blog</a></li><li><a class="header-module--nav-item--1ixk0" href="/gallery">Gallery</a></li><li class="toggle-input"><label class="cursor-pointer"><i class="fas fa-sun"></i><input type="checkbox"/> <!-- --> </label></li></ul></nav></header><span class="disqus-comment-count"> </span><h1 class="postTitle">Clean up your HTML with ES6 Modules</h1><p class="postDate">2021 April 25th</p><hr class="mb-4"/><p>if you are that person who is working with the web regardless of the role how you doing it, maybe for your WordPress site, a simple static website or you are a backend or full-stack developer and working with Javascript inside HTML files with code in <code>&lt;sctipt&gt;</code> tags, so this post for you.</p><p>Modularity is one of the main factors of any solid software to make it more efficient, reusable, and maintainable. if you are coming from any programming language you probably know about modules or classes sharing ways <code>import</code>, <code>module</code>, <code>use</code>, <code>#include</code> etc. </p><p>But when it comes to JavaScript this language that written inside a <code>&lt;script&gt;</code> tag in HTML file bunch of people thinking about just doing the job making some animation or add a third-party plugin to the website with zero modularity consideration and crowdy HTML files, so let&#x27;s get started! :fire:</p><p><img src="https://media.giphy.com/media/3o7TKUM3IgJBX2as9O/giphy.gif" alt="GIF"/></p><h1>How HTML file looks</h1><pre><code class="language-html">&lt;body&gt;
    &lt;script&gt;
        // function doAnimationForMe() {}
        // function doScrollToTopForMe()
    &lt;/script&gt;
    &lt;script&gt;
        // function doFirebaseIntegrationForMe() {}
        // function danceWithMe()
    &lt;/script&gt;
&lt;/body&gt;
</code></pre><p>let&#x27;s focus on <code>&lt;body&gt;</code> content only, and imaging <code>DRY</code> some of these little functions on multiple <code>HTML</code> files and think about <code>HTML</code> file length one last imaging if you want to update something or doing another dance so yeah here we go and will work through all <code>HTML</code> pages again over and over.</p><p><img src="https://media.giphy.com/media/VwwKdq5NV0nwQ/giphy.gif" alt="GIF"/></p><h1>Creating Javascript module</h1><p>Yes, that&#x27;s possible, js will not fight you, with newly introduced <code>ES6</code> keywords <code>import</code> and <code>export</code> you can encapsulate the module. regardless of the other benefits of working with modules. so now we are just focused on making the <code>HTML</code> file more cleaner.</p><p>As example lets grap <code>doAnimationForMe()</code> from the <code>HTML</code> file, and create <code>animation.js</code></p><pre><code class="language-javascript">const time = 1000

function start() { /* ..... */ }

function end() { /* ..... */ }

function doAnimationForMe() { 
  start()
  setTimeOut(function() {
    end();
  }, time)
}
</code></pre><p>same code from the <code>HTML</code> file but in an isolated, manipulated, and reusable zone.</p><p><img src="https://media.giphy.com/media/3o6UBhjHobLFgEmrJu/giphy.gif" alt="GIF"/></p><h1>Modules Export and Import</h1><p>Great its a time to making our pretty code modular ready. there are variant ways of <code>export</code>, <code>default</code>, <code>named</code>, and <code>aggregation</code>. let&#x27;s find out. another feature of the module if we planning to use this <code>doAnimationForMe()</code> at another js files or only include this module to the <code>HTML</code> page that we can export all functions in the file or just <code>doAnimationForMe()</code> function only. </p><ul><li>let&#x27;s start with the <strong>Named</strong> export</li></ul><pre><code class="language-javascript">export const time = 1000

export function start() { /* ..... */ }

export function end() { /* ..... */ }

export function doAnimationForMe() { 
  start()
  setTimeOut(function() {
    end()
  }, time)
}
</code></pre><p>in this way all animation staff exported can be imported later. another tip if you plan to export multiple stuff from one module,</p><pre><code class="language-javascript">const time = 100

function start() { /* ..... */ }

function end() { /* ..... */ }

function doAnimationForMe() { 
  start()
  setTimeOut(function() {
    end()
  }, time)
}

export {start, end, doAnimationForMe}
// shorthand for {start: start, end: end, doAnimationForMe}
</code></pre><p>also can export only <code>doAnimationForMe()</code> function and make the module more logical, just flag desired part by <code>export</code> or follow the export object tip.</p><pre><code class="language-javacript">// Code......
export {doAnimationForMe}
</code></pre><p>Another <em>tip</em>: since we are talking about the named <code>export</code> we can also cast names, till now if we will <code>import</code> <code>doAnimationForMe</code> we have to use the same name <code>doAnimationForMe</code> or will cause an error. for rename exported part: </p><pre><code class="language-javascript">export {doAnimationForMe as useAnimation}
</code></pre><p>let&#x27;s create another pseudo module sample that gets data from API then applying some animation, for the whole picture drawing, creating an <code>api.js</code> file.</p><pre><code class="language-javascript">const url = &#x27;/api/item&#x27;

export function getAllItems() {
  return new Promise(function (resolve, reject) {
    fetch(url)
      .then(function (response) {
        resolve(response)
      })
      .catch(function (error) {
        reject(error)
      })
  })
}
</code></pre><h1>Module import and reuse</h1><p>Yeah, let&#x27;s have some fun and put it all together creating an <code>app.js</code> file. </p><pre><code class="language-javascript">import {doAnimationForMe} from &#x27;./animation.js&#x27; // The relative path.
import {getAllItems} from &#x27;./api.js&#x27; // The relative path.

// Another Code...
function renderUi(items) {
  // Render items in the ui
}

function handleError(err) {
  // Handle the error
  console.error(err)
}

getAllItems().then(function(data) {
  renderUi(data)
  doAnimationForMe()
}).catch(function(err) {
  handleError(err)
})

window.addEventListener(&#x27;load&#x27;, getAllItems())
</code></pre><h1>Adding Module into <code>HTML</code> page</h1><p>it&#x27;s the time to cleanup the <code>HTML</code> file and include only our encapsulated module, with only one line consider relative paths also :</p><pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;!-- Code... --&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;!-- Code... --&gt;
    &lt;script src=&quot;./app.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>The difference is clear now how clean it our <code>HTML</code> but, for the first time properly you will get a nice error!</p><pre><code>Uncaught SyntaxError: Cannot use import statement outside a module
</code></pre><p><img src="https://media.giphy.com/media/3o751YNpKVoKx24UYU/giphy.gif" alt="GIF"/></p><p>Actually no. it&#x27;s the trick not kidding but we have to include one last attribute to our <code>script</code> tag which is the <code>type=&quot;module&quot;</code></p><p>so after a little update, the code will look like this:</p><pre><code class="language-html">&lt;script src=&quot;./app.js&quot; type=&quot;module&quot;&gt;&lt;/script&gt;
</code></pre><p>the error will go and now we can confirm that our modules all loaded into the <code>HTML</code> page by checking the network tab: </p><p><img src="https://i.imgur.com/HAS5J40.png" alt="Network tab image"/></p><blockquote><p>for further reading and it&#x27;s very important also to check the browser compatibility for this feature with your project or the client devices.
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules">JavaScript Modules -MDN</a></p></blockquote><ul><li>another way to doing the same job is  <strong>default export</strong>
there is no much difference but just in case you don&#x27;t care about names and want to <code>export</code> some functionality from the module without a specific name in <code>import</code>, it also&#x27;s good to avoid naming errors. let&#x27;s see the same example but in <strong>default export</strong>.</li></ul><p><code>animation.js</code></p><pre><code class="language-javascript">const time = 1000

function start() { /* ..... */ }

function end() { /* ..... */ }

export default function doAnimationForMe() { 
  start()
  setTimeOut(function() {
    end()
  }, time)
}
</code></pre><p><code>api.js</code></p><pre><code class="language-javascript">const url = &#x27;/api/item&#x27;

function getAllItems() {
  return new Promise(function (resolve, reject) {
    fetch(url)
      .then(function (response) {
        resolve(response)
      })
      .catch(function (error) {
        reject(error)
      })
  })
}

export default getAllItems
// same but, in another way...
</code></pre><p>the most interesting part here at <code>import</code> in <code>app.js</code>:</p><pre><code class="language-javascript">import doAnimation from &#x27;./animation.js&#x27;
import kofta from &#x27;./api.js&#x27;

// Another Code...
function renderUi(items) {
  // Render items in the ui
}

function handleError(err) {
  // Handle the error
  console.error(err)
}

kofta().then(function(data) {
  renderUi(data)
  doAnimation()
}).catch(function(err) {
  handleError(err)
})

window.addEventListener(&#x27;load&#x27;, getAllItems())
</code></pre><p>that&#x27;s will do the same job but in a simplified way.</p><p><img src="https://media.giphy.com/media/LlEc7uMgbIiECNK4ce/giphy.gif" alt="GIF"/></p><h2>Consolusion</h2><p>The goal of this post is to simplify working with modules also encouraging you to write clean <code>HTML</code> pages focused only on markup, and keep <code>JavaScript</code> files isolated too like <code>CSS</code> with the benefit of modularity at the functionality code on your website. <code>ES6</code> <code>import</code> and <code>export</code> also have a bunch of tips and tricks that&#x27;s can make life easier also the third way mentioned before <code>aggregation</code> export. I just mentioned some basics.</p><div id="disqus_thread"></div></div><footer class="mt-5"><p>Muhammed Moussa<!-- --> @2020, v: <!-- -->2.1.5</p></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/clean-up-your-html-with-eS6-modules/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-3f99b51aa82fcaeb5543.js"],"app":["/app-8a684073d732c11c195e.js"],"component---src-pages-404-js":["/component---src-pages-404-js-396aed35802d7ef1b1c3.js"],"component---src-pages-about-js":["/component---src-pages-about-js-c95feeff70392561979a.js"],"component---src-pages-blog-index-js":["/component---src-pages-blog-index-js-b44a717e99d54e108b3d.js"],"component---src-pages-contact-js":["/component---src-pages-contact-js-b6c42626acbf6537340d.js"],"component---src-pages-gallery-js":["/component---src-pages-gallery-js-3e70aebc6d5d382e0f73.js"],"component---src-pages-index-js":["/component---src-pages-index-js-93b90105145ab5a181ca.js"],"component---src-templates-post-page-template-js":["/component---src-templates-post-page-template-js-d7dc19145f6281335802.js"],"polyfills-dom":["/polyfills-dom-93064dd2f9b42a28a028.js"],"polyfills-core-js":["/polyfills-core-js-0023ff072e9b0f7b717f.js"]};/*]]>*/</script><script src="/polyfill-3f99b51aa82fcaeb5543.js" nomodule=""></script><script src="/component---src-templates-post-page-template-js-d7dc19145f6281335802.js" async=""></script><script src="/commons-e5a147ed1fa31cc8d9ab.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/app-8a684073d732c11c195e.js" async=""></script><script src="/framework-66de6f443629588fba4e.js" async=""></script><script src="/webpack-runtime-2d35c8ae8a6e820fd296.js" async=""></script></body></html>