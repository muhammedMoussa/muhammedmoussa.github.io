<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.8f02dd4b96e82e0ecc15.css">@import url(https://unpkg.com/tailwindcss@1.4.6/dist/tailwind.min.css);@import url(https://use.fontawesome.com/releases/v5.7.2/css/all.css);.header-module--header--3A712{position:relative;margin:10px 0}.header-module--title--33kOg{color:#000;font-size:3rem;text-decoration:none}.header-module--nav-list--87D9u{display:flex;list-style-type:none;margin:0}.header-module--nav-item--1ixk0{color:#999;font-size:.9rem;margin-right:1.3rem;text-decoration:none}.header-module--nav-item--1ixk0:hover{color:#666}.header-module--active-nav-item--26N0B{color:#3182ce}body{--bg:#fff;--textNormal:#222;--textTitle:#222;--textLink:#00f;--hr:rgba(0,0,0,0.2);background-color:var(--bg)}body.dark{-webkit-font-smoothing:antialiased;--bg:#1a202c;--textNormal:hsla(0,0%,100%,0.88);--textTitle:#fff;--textLink:#ff0;--hr:hsla(0,0%,100%,0.2)}.toggle-input{position:absolute;right:0}.toggle-input input{width:.1px!important;height:.1px!important}.postTitle{font-size:2em;margin:10px 0}.postDate{margin-bottom:10px}</style><meta name="generator" content="Gatsby 2.26.1"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link as="script" rel="preload" href="/webpack-runtime-2060744de94c7b557e7b.js"/><link as="script" rel="preload" href="/framework-9086242092609fce62cd.js"/><link as="script" rel="preload" href="/app-9f511bb80e7eee85fe8b.js"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/commons-0475bc051e8e010d4ecc.js"/><link as="script" rel="preload" href="/component---src-templates-post-page-template-js-9391446e38c7f5ca1f2d.js"/><link as="fetch" rel="preload" href="/page-data/blog/hack-angular-forms-with-rxjs/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3159585216.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/717330468.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="min-h-screen max-w-4xl p-5 mx-auto flex flex-col" style="background-color:var(--bg);color:var(--textNormal)"><div class="flex-grow"><header class="header-module--header--3A712"><nav><ul class="header-module--nav-list--87D9u"><li><a class="header-module--nav-item--1ixk0" href="/">Home</a></li><li><a class="header-module--nav-item--1ixk0" href="/blog">Blog</a></li><li><a class="header-module--nav-item--1ixk0" href="/gallery">Gallery</a></li><li><a class="header-module--nav-item--1ixk0" href="/resume">Resume</a></li><li class="toggle-input"><label class="cursor-pointer"><i class="fas fa-sun"></i><input type="checkbox"/> <!-- --> </label></li></ul></nav></header><span class="disqus-comment-count"> </span><h1 class="postTitle">Hack Angular Forms With Rxjs 🔥</h1><p class="postDate">2020 May 17th</p><hr class="mb-4"/><h1>Why Forms?</h1><p>Forms are heavily used behavior inside your application you have to keep its values and validation rules under your custom control, in a simple easy way as you can. today we are going to talk about one tip for controlling forms in angular development. maybe change your life. 😵</p><p><img src="https://media.giphy.com/media/vykQomUCNUJg0NqpXx/giphy.gif" alt="GIF"/></p><h1>Angular Forms</h1><p>If you are like me working daily with angular at least right now, you probably used or heard about Reactive Forms and Template Driven Forms and the fighting about which one I have to use?</p><h1>What the Tips!</h1><ul><li>before angular, you maybe were using HTML with JQuery forms, or redux forms if you are a React guy and so on. </li><li>since angular coming with Rxjs, so the tip is <strong><em>Observables</em></strong> not Reactive or TD Forms, yeah we will discuss how to manage the forms by only observables and data binding nothing more.</li></ul><p><img src="https://media.giphy.com/media/co5nmPivPa42vv6IVm/giphy.gif" alt="GIF"/></p><h1>Observable Based Form</h1><p>the simple idea is we have an observable at a form at the left-hand side and an observable at the right-hand side, and the process running on two data-binding, that&#x27;s it!</p><p><img src="https://media.giphy.com/media/tu54GM19sqJOw/giphy.gif" alt="GIF"/></p><p>No worries, we will walk through an example, let&#x27;s start!
you know if you will use the reactive form approach you will need some configs at module level and dependencies at the component level, as an example:</p><p><code>app.module.ts</code></p><pre><code class="language-typescript">import {ReactiveFormsModule} from &#x27;@angular/forms&#x27;;

@NgModule({
  declarations: [...],
  imports: [ReactiveFormsModule],
  bootstrap: [AppComponent]
})
</code></pre><p><code>form.component.ts</code></p><pre><code class="language-typescript">import {FormGroup, FormBuilder} from &#x27;@angular/forms&#x27;;

export class UserFormComponent {
  userForm: FormGroup;

  // maybe OnInit instead, but it&#x27;s okay we will never use 😋
  constructor(private fb: FormBuilder) {
    this.userForm = fb.group({
      // controls config
    })
  }

  updateform = () =&gt; {
     this.userForm.patchValue({
       // new data config
     });
  }

  resetForm = () =&gt; {
    this.userForm.reset();
  }

  getFormValues = (): object { 
    return this.userForm.value;
  }
}
</code></pre><p>and finally <code>form.componnet.html</code></p><pre><code class="language-html">&lt;form [formGroup]=&quot;userForm&quot;&gt;
  &lt;input formControlName=&quot;...&quot;&gt;
  &lt;input formControlName=&quot;...&quot;&gt;
&lt;form&gt;
</code></pre><p>in the above example as you see modules, dependencies, and configs for the form, in addition to the extra utilities for the update, reset and get value stuff, get here can bu also submit which is at the end the place you get the data and play with it.
that&#x27;s about the reactive forms approach as a reminder.</p><p>Another way can do it with TD Forms since I didn&#x27;t like it so we will never mention it&#x27;s an example!</p><p>ref: <a href="https://angular.io/guide/forms#building-a-template-driven-form">Angular TD Forms</a>.</p><p>#Now lets RX it!#</p><p><img src="https://media.giphy.com/media/l3vRazsPc3L1RqAs8/giphy.gif" alt="GIF"/></p><p>all that we need is a service as a source of truth for our approach, and the components can work with, yeah <strong>COMPONENTS</strong> not only form component that&#x27;s the power of observables and data streaming. 🚀
to be honest, you can do you can get form data at any parent component by template reference also, but let us go with pure state management at Rxjs. so our service something like this:</p><p>Note: you can find a complete example at Github.</p><p><code>state.service.ts</code></p><pre><code class="language-typescript">import {BehaviorSubject, Observable} from &#x27;rxjs&#x27;;

export class StateService {
  private userData$ = new BehaviorSubject&lt;IUser&gt;(new User());
  
  public setUserData = (userData: IUser) =&gt; this.userData$.next(userData);
  public getUserData = (): Observable&lt;IUser&gt; =&gt; this.userData$.asObservable();
  public resetUserData = () =&gt; this.userData$.next(new User());
}

</code></pre><p>let&#x27;s explain our clear service, we have a <code>BehaviorSubject</code> observable which will load the data for the form component or any component again! 😎
and some utils for getting, set, and reset, actually you can remove get and set, by making the observable public and make your component pointer directly to that observable. I&#x27;ll keep it clear. 🌚</p><p>let&#x27;s move to our component, you will notice no modules or dependencies required for the process except our state service. and we will try to make our form contains different possible data types: <code>string</code>, <code>number</code> and <code>boolean</code>.</p><p><code>observable-form.component.ts</code></p><pre><code class="language-typescript">import {Observable} from &#x27;rxjs&#x27;;
import {StateService} from &#x27;../state.service&#x27;;

export class ObservableFormComponent implements OnInit {
  userData$: Observable&lt;IUser&gt;;

  ngOnInit(): void {
    this.userData$ = this.stateService.getUserData();
  }

  onSubmit= () =&gt; {
    let data: any; 
    this.userData$.subscribe(user =&gt; data = user);
    console.log(data);
  }

  onReset= () =&gt; this.stateService.resetUserData();

  constructor(private stateService: StateService) { }
}
</code></pre><p>that&#x27;s it! let&#x27;s explain. what we have:</p><ul><li><p><code>userData$</code> the component observable which will listen to the <code>BehaviorSubject</code> we initialized at state service for use in our component HTML and Typescript.</p></li><li><p><code>onReset</code>: the utility responsible for reset data, maybe after the submit and getting <code>Ok</code> response from the <code>API</code>, or whatever!</p></li><li><p><code>onSubmit</code>: again the place we collect the data (current observable value), you can use any Rxjs technique to fetch and again you can make the  <code>BehaviorSubject</code> public and another option will be available to get the current data or make third util at service: </p></li></ul><pre><code class="language-typescript">const data = this.stateService.userData$.value;
// or in service
public getCurrentUserData = (): IUser =&gt; this.userData$.value;
</code></pre><p>we will go with the current approach for now, and finally, the time to link all that we made by the view, in fact, we didn&#x27;t make huge thing it simple, and you will find it simplest when usually use it.</p><p><code>observable-form.component.html</code>:
Note: we will add examples of control just the shoot you say Ahaa!, you will find the complete example at Github repo.</p><pre><code class="language-html">&lt;div *ngIf=&quot;(userData$ | async) &amp;&amp; userData$ | async as user&quot;&gt;
  &lt;input [(ngModel)]=&quot;user.name&quot; type=&quot;text&quot;&gt;
  &lt;input [(ngModel)]=&quot;user.active&quot; type=&quot;checkbox&quot;&gt;
  &lt;button (click)=&quot;onSubmit()&quot;&gt;Save&lt;/button&gt;
  &lt;button (click)=&quot;onReset()&quot;&gt;Reset&lt;/button&gt;
&lt;/div&gt;
</code></pre><p>that&#x27;s it, we are done now let your controls working with Rxjs and angular two data binding, you can catch a fresh copy of data instantly at HTML or your logic code, for example, you can bind HTML elements properties on your observable value, Yeah! 👻 </p><pre><code class="language-html">&lt;button [class]=&quot;user.age &amp;&amp; user.age &lt; 18 ? &#x27;cursor-not-allowed&#x27;: &#x27;cursor-pointer&#x27;&quot; (click)=&quot;onSubmit()&quot;&gt;Save&lt;/button&gt;
</code></pre><p><img src="https://media.giphy.com/media/S9nxk7qDUx2YfM3cVC/giphy.gif" alt="GIF"/></p><p>#another HINT 🎙️</p><p>as debugging you can do kind of this to catch whole picture and the power of what you made: </p><pre><code class="language-html">&lt;p&gt;Form Data&lt;/p&gt;
&lt;pre&gt;{{ userData$ | async | json }}&lt;/pre&gt;
</code></pre><p><img src="https://dev-to-uploads.s3.amazonaws.com/i/4agkycrpwjqcwsz15okf.gif" alt="debugging"/></p><p>#Concolusion 🖐️</p><p>we discussed forms tips for angular development by using built-in frameworks tools, Rxjs, and Data binding. in a short straight forward way, <strong>BUT</strong> this approach not Exclusive at angular think about it Rxjs is an isolated package that you can use and the second part is a data binding (Two way for making controls instantly update the observable) is a behavior that another framework can offer like <code>VueJs</code> in <code>v-model</code> directive.
thought sharing is welcomed since all of that post is just a personal point of view through daily experience.</p><p><a href="https://github.com/muhammedMoussa/angular-forms-tips">Github Repo</a>
<a href="https://angular-forms-tips.netlify.app/">Live Demo</a>
<a href="https://twitter.com/muhammedmoussa">Find Me on Twitter</a></p><div id="disqus_thread"></div></div><footer class="mt-5"><p>Muhammed Moussa<!-- --> @2020, v: <!-- -->2.1.5</p></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/hack-angular-forms-with-rxjs/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-91861f81ca7f0737d9ad.js"],"app":["/app-9f511bb80e7eee85fe8b.js"],"component---src-pages-404-js":["/component---src-pages-404-js-396aed35802d7ef1b1c3.js"],"component---src-pages-about-js":["/component---src-pages-about-js-c95feeff70392561979a.js"],"component---src-pages-blog-index-js":["/component---src-pages-blog-index-js-b44a717e99d54e108b3d.js"],"component---src-pages-contact-js":["/component---src-pages-contact-js-b6c42626acbf6537340d.js"],"component---src-pages-gallery-js":["/component---src-pages-gallery-js-751740be4072a1bfdfb9.js"],"component---src-pages-index-js":["/component---src-pages-index-js-93b90105145ab5a181ca.js"],"component---src-pages-resume-js":["/component---src-pages-resume-js-3a5625da556c14d43f30.js"],"component---src-templates-post-page-template-js":["/component---src-templates-post-page-template-js-9391446e38c7f5ca1f2d.js"],"polyfills-dom":["/polyfills-dom-7c4627081c92a90b6686.js"],"polyfills-core-js":["/polyfills-core-js-d6808c20691d2f0fd6cf.js"]};/*]]>*/</script><script src="/polyfill-91861f81ca7f0737d9ad.js" nomodule=""></script><script src="/component---src-templates-post-page-template-js-9391446e38c7f5ca1f2d.js" async=""></script><script src="/commons-0475bc051e8e010d4ecc.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/app-9f511bb80e7eee85fe8b.js" async=""></script><script src="/framework-9086242092609fce62cd.js" async=""></script><script src="/webpack-runtime-2060744de94c7b557e7b.js" async=""></script></body></html>